{"code": "window.onload = function(){\n  var artistSearchForm = document.getElementById(\"artistSearchForm\");\n  var artistNameEntry = document.getElementById(\"artistNameEntry\");\n  var submitButton = document.getElementById(\"submitButton\");\n\n  artistSearchForm.addEventListener(\"submit\", function (event) {\n    //Clear up the main content and prevent default\n    event.preventDefault();\n\n\n    var articlesDiv = document.getElementById(\"articlesDiv\");\n    articlesDiv.innerHTML = \"\";\n    var nameEntryValue = artistNameEntry.value.replace(/\\s/g, \"+\");\n\n    fetch(\"https://api.spotify.com/v1/search?q=\\"\" + nameEntryValue + \"\\"&type=artist&limit=1\",\n    {\n      method: \"GET\",\n      headers: {\n        \"Authorization\": \"Basic *&lt;base64 encoded d0acac994f0e4947b5eacdc3c480e31d:c5fe231aa97a41b29bef006c193a8a1c&gt;*\",\n        \"Accept\": \"application/json\",\n        \"Content-Type\": \"application/json\"\n      }\n    })\n    .then(function (response) {\n      return response.json();\n    })\n    .then(function (json) {\n      console.log(\"JSON is\", json);\n      if (json.artists.items[0] === undefined) {\n        var errorMessage = document.createElement(\"h3\");\n        errorMessage.innerHTML = \"Sorry but your search did not return any results\";\n        articlesDiv.appendChild(errorMessage);\n        artistSearchForm.reset();\n      }\n      console.log(\"json.artists is\", json.artists);\n      var artistId = json.artists.items[0].id;\n      console.log(\"artistId is\", artistId);\n      return artistId\n    })\n    .then(function (artistId) {\n      fetch(\"https://api.spotify.com/v1/artists/\" + artistId + \"/albums\",\n      {\n        method: \"GET\",\n        headers: {\n          \"Authorization\": \"Basic base64 encoded d0acac994f0e4947b5eacdc3c480e31d:c5fe231aa97a41b29bef006c193a8a1c\",\n          \"Accept\": \"application/json\",\n          \"Content-Type\": \"application/json\"\n        }\n      })\n      .then(function(response) {\n        return response.json();\n      })\n      .then(function (json) {\n        var jsonItems = json.items;\n        console.log(\"json items is\", jsonItems);\n        var albums = [];\n        for (let i = 0; i &lt; jsonItems.length; i++) {\n          var albumItem = {}\n          albumItem.artistName = artistNameEntry.value\n          albumItem.albumName = jsonItems[i].name;\n          albumItem.albumID = jsonItems[i].id;\n          albumItem.tracks = {};\n          albumItem.images = jsonItems[i].images;\n          albums.push(albumItem);\n        }\n        return albums;\n      })\n      .then(function(albums) {\n        var trackPromises = [];\n        for (let j = 0; j &lt; albums.length; j++) {\n          let trackPromise = fetch(\"https://api.spotify.com/v1/albums/\" + albums[j].albumID + \"/tracks\",\n          {\n            method: \"GET\",\n            headers: {\n              \"Authorization\": \"Bearer BQBd97aViKgz3QrJQQ8KNh-bc5r8ZEEYYIXrz7fdsaSyQRD_lAHVSGNHfWzuXlrwKyqrPXYWQTM6sQAHw6NHql1q4TFWP9sxqK83bhja_jzpOkLairz61aADXU9Se85RdRd7ZPeWg_142GEB6Q\",\n              \"Accept\": \"application/json\",\n              \"Content-Type\": \"application/json\"\n            }\n          })\n          .then(function (response) {\n            return response.json();\n          })\n          .then(function (json) {\n            var albumTracks = json.items;\n            for (let k = 0; k &lt; albumTracks.length; k++) {\n              albums[j].tracks[\"song\"+(k+1)] = albumTracks[k].name;\n            }\n            return albums[j];\n          });\n          trackPromises.push(trackPromise);\n        } //End of the for loop\n        return Promise.all(trackPromises);\n      })//good up to here. put parenthesis if it does not work\n      .then(function(albums) {\n        // var articlesDiv = document.getElementById(\"articlesDiv\");\n\n        var articleH1 = document.createElement(\"h1\");\n        // var h1Value = artistNameEntry.value.slice(0,1).toUpperCase() + artistNameEntry.value.slice(1).toLowerCase() + \" Discography\";\n        var h1Value = artistNameEntry.value[0].toUpperCase();\n        for (let o = 1; o &lt; artistNameEntry.value.length; o++) {\n          if (artistNameEntry.value[o-1] === \" \") {\n            h1Value += artistNameEntry.value[o].toUpperCase();\n          }\n          else {\n            h1Value += artistNameEntry.value[o].toLowerCase();\n          }\n        }\n\n        h1Value += \" Discography\"\n        articleH1.innerHTML = h1Value;\n        articlesDiv.appendChild(articleH1)\n\n        var articleH1 = document.createElement(\"h1\");\n        articleH1.innerHTML = artistNameEntry;\n\n        for (let l = 0; l &lt; albums.length; l++) {\n          var albumTitle = document.createElement(\"h3\");\n          albumTitle.innerHTML = albums[l].albumName\n          // console.log(albums[l].images[0].height);\n\n          let albumSongs = albums[l].tracks;\n\n          var albumOl = document.createElement(\"ol\");\n          var counter = 1\n          for (let key in albumSongs) {\n            var albumLi = document.createElement(\"li\");\n            albumLi.innerHTML = counter + \". \" + albumSongs[key];\n            albumOl.appendChild(albumLi);\n            counter++\n          }\n\n          var backgroundImageURL = albums[l].images[1].url;\n          console.log(backgroundImageURL);\n          // var image = document.createElement(\"img\");\n          // image.src = backgroundImageURL;\n          var textDiv = document.createElement(\"div\");\n\n          var article = document.createElement(\"article\");\n          article.className += \"albumSlot\";\n          article.style.background = \"url(\" + backgroundImageURL + \")\";\n          // article.appendChild(image);\n          textDiv.appendChild(albumTitle);\n          textDiv.appendChild(albumOl);\n          article.appendChild(textDiv);\n\n\n          // var articlesDiv = document.getElementById(\"articlesDiv\");\n          articlesDiv.appendChild(article);\n        }\n        console.log(albums);\n      });\n    });\n    // artistSearchForm.reset();\n  }); //End of submit Event Listener\n\n}; //End of window.onload"}

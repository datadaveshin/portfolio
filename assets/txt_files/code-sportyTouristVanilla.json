{"code": "var sourcesArr = [\n  {\n    source: \"ESPN\",\n    url: \"https://newsapi.org/v1/articles?source=espn&sortBy=top&apiKey=909efd3e931c4e16bde5565b8d10f113\"\n  },\n  {\n    source: \"ESPN Cric Info\",\n    url: \"https://newsapi.org/v1/articles?source=espn-cric-info&sortBy=latest&apiKey=909efd3e931c4e16bde5565b8d10f113\",\n  },\n  {\n    source: \"Fox Sports\",\n    url: \"https://newsapi.org/v1/articles?source=fox-sports&sortBy=latest&apiKey=909efd3e931c4e16bde5565b8d10f113\"\n  },\n  {\n    source: \"NFL News\",\n    url: \"https://newsapi.org/v1/articles?source=nfl-news&sortBy=latest&apiKey=909efd3e931c4e16bde5565b8d10f113\"\n  },\n  {\n    source: \"SKY Sports News\",\n    url: \"https://newsapi.org/v1/articles?source=sky-sports-news&sortBy=latest&apiKey=909efd3e931c4e16bde5565b8d10f113\"\n  },\n  {\n  source: \"BBC Sports\",\n  url: \"https://newsapi.org/v1/articles?source=bbc-sport&sortBy=top&apiKey=909efd3e931c4e16bde5565b8d10f113\"\n  },\n  {\n    source: \"FourFourTwo\",\n    url: \"https://newsapi.org/v1/articles?source=four-four-two&sortBy=latest&apiKey=909efd3e931c4e16bde5565b8d10f113\"\n  },\n  {\n    source: \"talkSport\",\n    url: \"https://newsapi.org/v1/articles?source=talksport&sortBy=latest&apiKey=909efd3e931c4e16bde5565b8d10f113\"\n  },\n  {\n    source: \"TheSPORTbible\",\n    url: \"https://newsapi.org/v1/articles?source=the-sport-bible&sortBy=latest&apiKey=909efd3e931c4e16bde5565b8d10f113\"\n  },\n  {\n    source: \"Football Italia\",\n    url: \"https://newsapi.org/v1/articles?source=football-italia&sortBy=latest&apiKey=909efd3e931c4e16bde5565b8d10f113\"\n  }\n];\nvar expandedSourcesArr = [];\n//shuffle the array\nfunction shuffleArray(array) {\n    for (var i = array.length - 1; i &gt; 0; i--) {\n        var j = Math.floor(Math.random() * (i + 1));\n        var temp = array[i];\n        array[i] = array[j];\n        array[j] = temp;\n    }\n    return array;\n  }\n\n//reload the page\nfunction pageReload(time) {\n  setTimeout(reloadFun, time);\n}\n//callback for reloading the page\nfunction reloadFun() {\n  window.location.reload(true);\n}\n\nwindow.onload = function() {\n  shuffleArray(sourcesArr);\n  heroSectionArticles(sourcesArr);\n  sportsSectionArticles(sourcesArr);\n\n  toggleHeroClass();\n  toggleArticleClasses();\n  pageReload(600000);\n};//End of onload function\n\n\nfunction expandSources(arrWithSources, endArr) {\n  for (var i = 0; i &lt; arrWithSources.length; i++) {\n    let sourcesUrl = arrWithSources[i].url;\n    $.getJSON(sourcesUrl, function (result) {\n      endArr.push(result);\n      // console.log(result);\n    });\n  }\n}\nexpandSources(sourcesArr, expandedSourcesArr);\n// console.log(expandedSourcesArr);\n//---------------------HERO CONTENT CREATION------------------------------\n//creation and append of the article tags in the main Grid\nfunction heroSectionArticles(arrWithSources) {\n  let heroSection = document.getElementById(\"heroSection\");\n  let sourcesUrl = arrWithSources[0].url;\n  let heroArticle = document.createElement(\"article\");\n  heroArticle.className += \"heroArticleClass\";\n  // heroArticle.className += \" transform\"; Not needed because I am not applying special effect\n  arrWithSources[0] = heroArticle;\n  apiData(0, sourcesUrl);\n  heroSection.appendChild(heroArticle);\n}\n\n\n//------------------MAIN GRID CONTENT CREATION----------------------------\n//creation and append of the article tags in the main Grid\nfunction sportsSectionArticles(arrWithSources) {\n  let sportsSection = document.getElementById(\"sportsSection\");\n  for (let i = 1; i &lt; arrWithSources.length; i++) {\n    let sourcesUrl = arrWithSources[i].url;\n\n    function jSonArr(url) {\n      $.getJSON(url, function (result) {\n        // console.log(result);\n      });\n    }\n    jSonArr(sourcesUrl);\n\n    let sportsArticle = document.createElement(\"article\");\n    sportsArticle.className += \"sportsArticleClass\";\n    // sportsArticle.className += \" transform\"; //not needed because I am not applying special effect\n    arrWithSources[i] = sportsArticle;\n    apiData(i, sourcesUrl);\n    sportsSection.appendChild(sportsArticle);\n  }\n}\n\n//api Data retrieval\nfunction apiData(idxForSourcesArr, url) {\n  // console.log(\"The url is: \" + url);\n  $.ajax({\n    url: url,\n    method: \"GET\",\n    success: sportsNewsResult\n    // error: bbcNewsError\n  });\n\n  // Inner function in order to close over idxForSourcesArr\n  function sportsNewsResult(data) {\n    //articles\n    let resultTitle = document.createElement(\"h3\");\n    let resultSource = document.createElement(\"h4\");\n    let imageDiv = document.createElement(\"div\");\n    let heroImageDiv = document.createElement(\"div\");//////////////////////////////\n    let resultImage = document.createElement(\"img\");\n    let resultArticle = document.createElement(\"p\");\n    let articleSourceAnchor = document.createElement(\"a\");\n\n    let moreButtonDiv = document.createElement(\"div\");\n    let moreButtonAnchor = document.createElement(\"a\");\n\n    resultTitle.textContent = data.articles[0].title;\n    imageDiv.className += \"imageDiv\";\n    heroImageDiv.className += \"heroImageDiv\";/////////////////////////////////\n    moreButtonDiv.className += \"moreButtonDiv\";\n\n    articleSourceAnchor.setAttribute(\"href\", data.articles[0].url);\n    articleSourceAnchor.setAttribute(\"target\", \"_blank\");\n    resultImage.setAttribute(\"alt\", \"Sorry, there is no image provided by the source\");\n    articleSourceAnchor.innerText = \"Source: \" + data.source + \" via newsapi.org \";\n    resultImage.src = data.articles[0].urlToImage;\n    resultArticle.textContent = data.articles[0].description;\n    moreButtonAnchor.innerText = \"More\";\n\n    //\n    imageDiv.appendChild(resultImage);\n    resultSource.appendChild(articleSourceAnchor);\n    moreButtonDiv.appendChild(moreButtonAnchor);\n    sourcesArr[idxForSourcesArr].appendChild(imageDiv);\n    sourcesArr[idxForSourcesArr].appendChild(resultTitle);\n    sourcesArr[idxForSourcesArr].appendChild(resultSource);\n    sourcesArr[idxForSourcesArr].appendChild(resultArticle);\n    sourcesArr[idxForSourcesArr].appendChild(moreButtonDiv);\n\n  }\n} //End of apiData function\n\n// function bbcNewsError {\n//\n// }\n\n//-------------------TOGGLES------------------------------\n//toggle between classes for expanding the hero article content\nfunction toggleHeroClass() {\n  $(\".heroArticleClass\").on(\"click\", function(){\n    $(this).toggleClass(\"heroArticleExpanded\");\n    $(this).children(\"div\").toggleClass(\"heroImageDivExpanded\");\n    $(this).children(\"div\").toggleClass(\"imageDiv\");\n    $(this).children(\".moreButtonDiv\").removeClass(\"imageDiv\");\n\n    $(\".sportsArticleExpanded\").removeClass(\"sportsArticleExpanded\");\n    $(\".imageDivExpanded\").removeClass(\"imageDivExpanded\");\n  });\n}\n\n//toggle between classes for expanding the article content\nfunction toggleArticleClasses() {\n  $(\".sportsArticleClass\").on(\"click\", function(){\n    $(this).toggleClass(\"sportsArticleExpanded\");\n    $(this).children(\".imageDiv\").toggleClass(\"imageDivExpanded\");\n\n    $(this).siblings().removeClass(\"sportsArticleExpanded\");\n    $(\".heroArticleExpanded\").removeClass(\"heroArticleExpanded\");\n    $(\".heroImageDivExpanded\").addClass(\"heroImageDiv\");\n    $(\".heroImageDivExpanded\").removeClass(\"heroImageDivExpanded\");\n    $(this).siblings().children(\"div\").removeClass(\"imageDivExpanded\");\n  });\n}"}
